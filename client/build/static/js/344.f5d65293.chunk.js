"use strict";(self.webpackChunkwingrow=self.webpackChunkwingrow||[]).push([[344],{2344:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var r=t(7762),n=t(885),s=t(2791),l=t(7689),i=t(184),d=function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.j3,{})})},c=t(5194),o=t(4565),u=function(e){var a=e.header,t=e.value;return(0,i.jsx)("div",{className:"card_layout",children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(o.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:a}),(0,i.jsx)(o.Z,{variant:"h5",component:"div",children:(0,i.jsx)("b",{children:t})})]})})},m=t(1840),h=t(8745),f=t(9365),v=t(9407),x=t(8055),j=t(988),_=t(3223);function p(e){var a=e.handleChangeMarket,t=e.fromDate,r=e.setfromDate,n=e.toDate,s=e.settoDate,l=e.value,d=e.setValue,c=e.handleSearch,o=e.farmersMarket,u=e.market,m=e.handleClose,p=e.handleOpen,N=e.open,Z=e.handleSearchmarkets,D=e.handleSearchDate;return(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{className:"filter_btn_admin",onClick:p,children:"Filter"}),(0,i.jsx)(h.Z,{open:N,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsxs)("div",{className:"box_filter",children:[(0,i.jsx)("h2",{style:{margin:"0 auto"},children:"Filters"}),(0,i.jsxs)("div",{className:"header_items",children:[(0,i.jsx)("span",{children:"Filter by date"}),(0,i.jsx)("div",{className:"date_picker",children:(0,i.jsx)(_.Z,{setValue:d,value:l})}),(0,i.jsx)("button",{className:"filter_btn",onClick:D,children:"Search"})]}),(0,i.jsxs)("div",{className:"header_items_center",children:[(0,i.jsxs)("div",{className:"header_items_filter",children:[(0,i.jsx)("span",{className:"date_picker_label",children:"Filter between dates from"}),(0,i.jsx)("div",{className:"date_picker",children:(0,i.jsx)(_.Z,{setValue:r,value:t})})]}),(0,i.jsxs)("div",{className:"header_items_filter",children:[(0,i.jsx)("span",{className:"date_picker_label",children:"Filter between dates to"}),(0,i.jsx)("div",{className:"date_picker",children:(0,i.jsx)(_.Z,{setValue:s,value:n})})]}),(0,i.jsx)("button",{className:"filter_btn",onClick:c,children:"Search"})]}),(0,i.jsxs)("div",{className:"header_items",children:[(0,i.jsx)("span",{children:"Filter market wise :"}),(0,i.jsxs)(x.Z,{sx:{m:1,minWidth:150},size:"small",children:[(0,i.jsx)(f.Z,{id:"demo-select-small",children:"Market"}),(0,i.jsx)(j.Z,{labelId:"demo-select-small",id:"demo-select-small",value:u,label:"Market",onChange:a,children:0!==o.length&&o.map((function(e,a){return(0,i.jsx)(v.Z,{value:e,children:e},a)}))})]}),(0,i.jsx)("button",{className:"filter_btn",onClick:Z,children:"Search"})]})]})})]})}var N=t(1087),Z=function(e){var a=e.handleChangeMarket,t=e.fromDate,r=e.setfromDate,n=e.toDate,s=e.settoDate,l=e.value,d=e.setValue,c=e.handleSearch,o=e.market,h=e.farmersMarket,f=e.open,v=e.setOpen,x=e.handleClose,j=e.handleOpen,_=e.handleSearchmarkets,Z=e.handleSearchDate,D=e.filteredInData,g=e.filteredOutData,k=e.purchaseQty,S=e.purchaseAmount,Y=e.salesQty,b=e.salesAmount,M=e.noOfBookedStalls,C=e.totalFarmers,y=(e.farmers,e.Farmers),w=e.Customer,F=[],A=new Map;return y&&y.forEach((function(e){A.has(e.farmertype)?A.set(e.farmertype,A.get(e.farmertype)+1):A.set(e.farmertype,0)})),A.forEach((function(e,a){F.push({farmertype:a,count:e})})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"admin_main_component",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(p,{handleChangeMarket:a,fromDate:t,setfromDate:r,toDate:n,settoDate:s,value:l,setValue:d,handleSearch:c,market:o,farmersMarket:h,open:f,setOpen:v,handleClose:x,handleOpen:j,handleSearchmarkets:_,handleSearchDate:Z}),(0,i.jsx)("h2",{className:"overalldata_header",children:"Farmers Statistics"}),D&&g&&(0,i.jsxs)("div",{className:"cards_container",children:[(0,i.jsx)(u,{header:"Total farmers market :",value:C.size}),(0,i.jsx)(u,{header:"Purchase Quantity :",value:k}),(0,i.jsx)(u,{header:"Purchase Amount :",value:S}),(0,i.jsx)(u,{header:"Sales Quantity :",value:Y}),(0,i.jsx)(u,{header:"Sales Amount :",value:b}),(0,i.jsx)(u,{header:"Profit of farmers :",value:Y-k}),(0,i.jsx)(u,{header:"Stalls Booked :",value:M})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"overalldata_header",children:"Types of Farmers"}),F&&(0,i.jsx)("div",{className:"cards_container",children:F.map((function(e,a){return(0,i.jsx)(u,{header:e.farmertype,value:e.count},a)}))})]}),w&&(0,i.jsx)("div",{className:"customers_entries_count",children:(0,i.jsxs)("span",{children:[(0,i.jsx)("h2",{children:"Total no. of customers"}),(0,i.jsx)("div",{className:"customers_count",children:w.length})]})}),(0,i.jsxs)("div",{className:"links_container",children:[(0,i.jsx)("h2",{className:"overalldata_header",children:"Navigation Links"}),(0,i.jsxs)("div",{className:"admin_links",children:[(0,i.jsx)(N.rU,{className:"admin_links_details",to:"../listoffarmers",children:"Get list of Farmers"}),(0,i.jsx)(N.rU,{className:"admin_links_details",to:"../listofCustomers",children:"Get list of Customers"}),(0,i.jsx)(N.rU,{className:"admin_links_details",to:"../cancelledstalls",children:"Get list of Cancelled Stalls"})]})]})]}),!D&&!g&&!y&&(0,i.jsx)(m.Z,{})]})},D=function(e){var a=e.Farmers;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"farmers_data_entries",children:(0,i.jsxs)("div",{className:"farmers_entries",children:[(0,i.jsxs)("div",{className:"farmers_entries_nav",children:[(0,i.jsx)("span",{className:"farmers_entries_nav_srno",children:"Sr. No"}),(0,i.jsx)("span",{className:"farmers_entries_nav_farmername",children:"Farmers Name"}),(0,i.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:"Farmers Type"})]}),(0,i.jsx)("div",{className:"farmers_entries_body",children:a&&a.map((function(e,a){return(0,i.jsxs)("div",{className:"farmers_entries_section",children:[(0,i.jsx)("span",{className:"farmers_entries_nav_srno",children:a+1}),(0,i.jsxs)("span",{className:"farmers_entries_nav_farmername",children:[e.firstname," ",e.lastname]}),(0,i.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:e.farmertype})]},a)}))})]})})})},g=function(e){var a=e.Customer;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"farmers_data_entries",children:(0,i.jsxs)("div",{className:"farmers_entries",children:[(0,i.jsxs)("div",{className:"farmers_entries_nav",children:[(0,i.jsx)("span",{className:"farmers_entries_nav_srno",children:"Sr. No"}),(0,i.jsx)("span",{className:"farmers_entries_nav_farmername",children:"Customers Name"}),(0,i.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:"Phone No."})]}),(0,i.jsxs)("div",{className:"farmers_entries_body",children:[a&&0!==a.length&&a.map((function(e,a){return(0,i.jsxs)("div",{className:"farmers_entries_section",children:[(0,i.jsx)("span",{className:"farmers_entries_nav_srno",children:a+1}),(0,i.jsxs)("span",{className:"farmers_entries_nav_farmername",children:[e.firstname," ",e.lastname]}),(0,i.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:e.phone})]},a)})),!a&&(0,i.jsx)(m.Z,{}),a&&0===a.length&&(0,i.jsx)("div",{className:"farmers_entries_section",children:"No data available"})]})]})})})},k=function(e){var a=e.CancelledStalls,t=e.Farmers,r=e.handleRefundDelete;return(0,i.jsx)(i.Fragment,{children:a&&(0,i.jsx)("div",{className:"cancellation_feed",children:(0,i.jsxs)("div",{className:"cancellation_feed_container",children:[(0,i.jsx)("h2",{className:"cancellation_header",children:"Cancellation Data"}),(0,i.jsxs)("div",{className:"cancellation_body",children:[a&&0!==a.length&&a.map((function(e,a){var s=t&&t.filter((function(a){return a._id===e.bookedBy})),l=(0,n.Z)(s,1)[0];return(0,i.jsxs)("div",{className:"cancellation_card",children:[(0,i.jsx)("h2",{style:{textAlign:"center",padding:"0.5rem",textTransform:"capitalize"},children:l.firstname+" "+l.Datelastname}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Phone No : "}),l.phone]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Stall Address : "}),e.address]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Cancellation Date : "}),e.cancelledAt]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Booked Date : "}),e.bookedAt]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Stall Name :"}),e.stallName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:"Refund Status :"}),"Not Refunded"]}),(0,i.jsx)("div",{className:"refund_btn_wrapper",children:(0,i.jsx)("button",{className:"refund_btn",id:e._id,onClick:r,children:"Mark as Refunded"})})]},a)})),a&&0===a.length&&(0,i.jsx)("h2",{style:{margin:"auto"},children:"No Cancellation Data!"}),!a&&(0,i.jsx)(m.Z,{})]})]})})})},S=t(5653),Y=t(4569),b=t.n(Y),M=t(6456),C=t(6525),y=t(7892),w=t.n(y),F=function(){var e=(0,s.useState)(),a=(0,n.Z)(e,2),t=a[0],c=a[1],o=(0,s.useState)(),u=(0,n.Z)(o,2),m=u[0],h=u[1],f=(0,s.useState)(w()(Date.now()).format("YYYY-MM-DD")),v=(0,n.Z)(f,2),x=v[0],j=v[1],_=(0,s.useState)(),p=(0,n.Z)(_,2),N=p[0],Y=p[1],y=(0,s.useState)(),F=(0,n.Z)(y,2),A=F[0],O=F[1],I=(0,s.useState)(w()(Date.now()).format("YYYY-MM-DD")),T=(0,n.Z)(I,2),B=T[0],R=T[1],V=(0,s.useState)(w()(Date.now()).format("YYYY-MM-DD")),P=(0,n.Z)(V,2),E=P[0],Q=P[1],U=s.useState(""),W=(0,n.Z)(U,2),q=W[0],z=W[1],G=(0,s.useState)(),L=(0,n.Z)(G,2),$=L[0],H=L[1],J=(0,s.useState)(),K=(0,n.Z)(J,2),X=K[0],ee=K[1],ae=s.useState(!1),te=(0,n.Z)(ae,2),re=te[0],ne=te[1],se=function(){return ne(!1)},le=(0,s.useState)(),ie=(0,n.Z)(le,2),de=ie[0],ce=ie[1],oe=(0,s.useState)(),ue=(0,n.Z)(oe,2),me=ue[0],he=ue[1];(0,s.useEffect)((function(){C.Z.getBookedStalls().then((function(e){var a=null===e||void 0===e?void 0:e.data;ee(a)})),C.Z.getInwardData().then((function(e){c(null===e||void 0===e?void 0:e.data),Y(null===e||void 0===e?void 0:e.data)})),C.Z.getOutwardData().then((function(e){h(null===e||void 0===e?void 0:e.data),O(null===e||void 0===e?void 0:e.data)})),C.Z.getcancelledStalls().then((function(e){H(null===e||void 0===e?void 0:e.data)})),S.Z.getFarmers().then((function(e){ce(null===e||void 0===e?void 0:e.data)})),S.Z.getUsers().then((function(e){he(null===e||void 0===e?void 0:e.data)}))}),[]);var fe=new Set,ve=new Set,xe=new Set,je=[],_e=0,pe=0,Ne=0,Ze=0,De=null===X||void 0===X?void 0:X.length;t&&t.forEach((function(e){xe.add(e.market)})),N&&N.forEach((function(e){fe.add(e.market),ve.add(e.userId),_e+=e.purchase_quantity,pe+=e.purchase_rate})),A&&A.forEach((function(e){Ne+=e.sales_quantity,Ze+=e.sales_rate}));var ge,ke=(0,r.Z)(xe);try{for(ke.s();!(ge=ke.n()).done;){var Se=ge.value;je.push(Se)}}catch(Ye){ke.e(Ye)}finally{ke.f()}return(0,i.jsx)(l.Z5,{children:(0,i.jsxs)(l.AW,{path:"/",element:(0,i.jsx)(d,{}),children:[(0,i.jsx)(l.AW,{index:!0,element:(0,i.jsx)(Z,{handleChangeMarket:function(e){z(e.target.value)},fromDate:B,setfromDate:R,toDate:E,settoDate:Q,value:x,setValue:j,handleSearch:function(){var e=t&&t.filter((function(e){var a=e.time.split("T"),t=(0,n.Z)(a,1)[0];return t>=w()(B).format("YYYY-MM-DD")&&t<=w()(E).format("YYYY-MM-DD")})),a=m&&m.filter((function(e){var a=e.time.split("T"),t=(0,n.Z)(a,1)[0];return t>=w()(B).format("YYYY-MM-DD")&&t<=w()(E).format("YYYY-MM-DD")})),r=X&&X.filter((function(e){var a=e.bookedAt.split("T"),t=(0,n.Z)(a,1)[0];return t>=w()(B).format("YYYY-MM-DD")&&t<=w()(E).format("YYYY-MM-DD")}));ee(r),Y(e),O(a),se()},market:q,farmersMarket:je,open:re,setOpen:ne,handleClose:se,handleOpen:function(){return ne(!0)},handleSearchmarkets:function(){var e=t&&t.filter((function(e){return e.market===q}));Y(e),se()},handleSearchDate:function(){var e=t&&t.filter((function(e){var a=e.time.split("T");return(0,n.Z)(a,1)[0]===w()(x).format("YYYY-MM-DD")})),a=m&&m.filter((function(e){var a=e.time.split("T");return(0,n.Z)(a,1)[0]===w()(x).format("YYYY-MM-DD")})),r=X&&X.filter((function(e){return e.bookedAt===w()(x).format("YYYY-MM-DD")}));ee(r),Y(e),O(a),se()},filteredInData:N,filteredOutData:A,purchaseQty:_e,purchaseAmount:pe,salesQty:Ne,salesAmount:Ze,noOfBookedStalls:De,totalFarmers:fe,farmers:ve,Farmers:de,Customer:me})}),(0,i.jsx)(l.AW,{path:"/listoffarmers",element:(0,i.jsx)(D,{Farmers:de})}),(0,i.jsx)(l.AW,{path:"/listofCustomers",element:(0,i.jsx)(g,{Customer:me})}),(0,i.jsx)(l.AW,{path:"/cancelledstalls",element:(0,i.jsx)(k,{Farmers:de,CancelledStalls:$,handleRefundDelete:function(e){var a=e.target.id;!0===window.confirm("Confirm Refunded?")&&b().delete("http://localhost:4000/cancelledstalls",{headers:(0,M.Z)(),data:{id:a}}).then((function(e){var a=null===e||void 0===e?void 0:e.data,t=$.filter((function(e){return e._id!==a._id}));H(t)}))}})})]})})}},3223:function(e,a,t){t.d(a,{Z:function(){return o}});var r=t(1413),n=(t(2791),t(4162)),s=t(5017),l=t(6571),i=t(7792),d=t(3484),c=t(184);function o(e){var a=e.setValue,t=e.value;return(0,c.jsx)(l._,{dateAdapter:i.y,children:(0,c.jsx)(n.Z,{spacing:3,children:(0,c.jsx)(d.$,{label:"Date desktop",inputFormat:"MM/DD/YYYY",value:t,onChange:function(e){a(e)},renderInput:function(e){return(0,c.jsx)(s.Z,(0,r.Z)({},e))}})})})}},6525:function(e,a,t){var r=t(4569),n=t.n(r),s=t(6456),l="http://localhost:4000/auth/",i={postInward:function(e,a,t,r,i){return n().post(l+"inward",{commodity:e,purchase_quantity:a,purchase_rate:t,market:r,time:i},{headers:(0,s.Z)()})},postOutward:function(e,a,t,r,i){return n().post(l+"outward",{commodity:e,sales_quantity:a,sales_rate:t,market:r,time:i},{headers:(0,s.Z)()})},getInward:function(){return n().get(l+"inward",{headers:(0,s.Z)()})},getOutward:function(){return n().get(l+"outward",{headers:(0,s.Z)()})},getMyStalls:function(){return n().get(l+"stalls",{headers:(0,s.Z)()})},getInwardData:function(){return n().get(l+"inwardData",{headers:(0,s.Z)()})},getOutwardData:function(){return n().get(l+"outwardData",{headers:(0,s.Z)()})},getBookedStalls:function(){return n().get(l+"bookedstalls",{headers:(0,s.Z)()})},getcancelledStalls:function(){return n().get(l+"cancelledstalls",{headers:(0,s.Z)()})}};a.Z=i},5653:function(e,a,t){var r=t(4569),n=t.n(r),s=t(6456),l="http://localhost:4000/auth/",i={getPublicContent:function(){return n().get(l+"all")},getStallsData:function(){return n().get(l+"stalls",{headers:(0,s.Z)()})},getAdminData:function(){return n().get(l+"admin",{headers:(0,s.Z)()})},getInOutdata:function(){return n().get(l+"inwardoutward",{headers:(0,s.Z)()})},getFarmers:function(){return n().get(l+"farmer",{headers:(0,s.Z)()})},getAllUsers:function(){return n().get(l+"allusers",{headers:(0,s.Z)()})},getUsers:function(){return n().get(l+"users",{headers:(0,s.Z)()})}};a.Z=i},5194:function(e,a,t){t.d(a,{Z:function(){return x}});var r=t(7462),n=t(3366),s=t(2791),l=t(8182),i=t(4419),d=t(277),c=t(5513),o=t(5878),u=t(1217);function m(e){return(0,u.Z)("MuiCardContent",e)}(0,o.Z)("MuiCardContent",["root"]);var h=t(184),f=["className","component"],v=(0,d.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,a){return a.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),x=s.forwardRef((function(e,a){var t=(0,c.Z)({props:e,name:"MuiCardContent"}),s=t.className,d=t.component,o=void 0===d?"div":d,u=(0,n.Z)(t,f),x=(0,r.Z)({},t,{component:o}),j=function(e){var a=e.classes;return(0,i.Z)({root:["root"]},m,a)}(x);return(0,h.jsx)(v,(0,r.Z)({as:o,className:(0,l.Z)(j.root,s),ownerState:x,ref:a},u))}))}}]);
//# sourceMappingURL=344.f5d65293.chunk.js.map